<!doctype html><html lang=en><style>﻿html,body,div,form,fieldset,legend,label,h1{margin:0;padding:0}table{border-collapse:collapse;border-spacing:0}th,td{text-align:left;vertical-align:top}h1,h2,h3,h4,h5,h6,th,td,caption{font-weight:400}img{border:0;max-width:100%}video{max-width:100%}h1{font-size:1.87em}h2{font-size:1.2em;margin-bottom:10px;margin-top:0}h3{margin-top:50px}body{background-color:#fff;color:rgba(0,0,0,.8);font-family:medium-content-serif-font,Georgia,Cambria,times new roman,Times,serif;-moz-font-feature-settings:"liga" on;font-feature-settings:"liga" on;font-size:1.25em;-moz-osx-font-smoothing:grayscale;font-style:normal;font-weight:400;letter-spacing:-.003em;line-height:1.58;text-rendering:optimizeLegibility}article{margin-top:44px}pre{-moz-font-feature-settings:"liga" off;font-feature-settings:"liga" off;font-size:.92em;-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;padding:20px;overflow:auto}::-moz-selection{background:#000;color:#fff}::selection{background:#000;color:#fff}body{margin-top:8%}header{font-size:.78em;margin:0 auto 2em;max-width:220px;text-align:center}a:link,a:visited,a:hover,a:active{color:#af403c;text-decoration:none}a:hover{text-decoration:underline}nav{text-align:center}nav ul{display:inline-block;text-align:initial;padding-left:0}nav li:not(:first-child):before{content:" · "}nav li{list-style:none;display:inline}.logo{background-size:cover;display:inline-block;height:150px;width:171px}hr{background-color:#333;border:0;height:1px;margin:30px 0}.published-date{color:#888;font-size:.8em}.subtitle{margin:0 0 2em}blockquote{border-left:4px solid #ededee;font-style:italic;margin:4px 10px;padding:3px 20px}code{background-color:#f9f9fa;border:1px solid #ededee;border-radius:6px;display:inline-block;font-family:courier new,courier,monospace;-moz-font-feature-settings:"liga" off;font-feature-settings:"liga" off;font-size:16px;-moz-osx-font-smoothing:auto;-webkit-font-smoothing:subpixel-antialiased;max-width:100%;overflow-x:auto;padding:0 5px;vertical-align:middle;word-wrap:normal;box-shadow:0 1px 1px rgba(0,0,0,.125)}.button{background-color:#af403c;border-radius:10px;color:#fff;margin:40px auto;padding:10px;text-align:center}.button:hover{background-color:red}.talk{margin-top:80px}figure{font-size:.9em;font-style:italic;margin:0 0 40px;padding:0;text-align:center;text-indent:0}figcaption{margin-top:10px}.loader{position:relative;overflow:hidden;width:auto}.loader object{position:absolute}.loader img,.loader object{display:block;top:0;left:0;width:100%}object{position:relative;float:left;display:block}object::after{position:absolute;top:0;left:0;display:block;width:1e3px;height:1e3px;content:'';background:#efefef}.frozen{-webkit-filter:blur(8px);-moz-filter:blur(8px);-o-filter:blur(8px);-ms-filter:blur(8px);filter:blur(8px);transform:scale(1.04);animation:.2s ease-in .4s 1 forwards fade;width:100%}@keyframes fade{0%{opacity:1}100%{opacity:0}}@media(max-width:520px){body{padding:0 20px}pre{font-size:.85em;padding:5px}h1{font-size:1.6em}}@media(min-width:520px){body{margin:10% auto 0;width:480px}h1{font-size:1.6em}}@media(min-width:1024px){body{width:850px}header{float:left;width:210px}main,footer{margin-left:260px;margin-bottom:40px}}.post-navigation{margin-bottom:10px}footer{border-top:1px solid #000;margin-bottom:40px}footer .links{list-style:none;display:inline}</style><link rel=dns-prefetch href=//www.google-analytics.com/><link rel=apple-touch-icon sizes=180x180 href="/apple-touch-icon.png?v=m2llJQPQq8"><link rel=icon type=image/png sizes=32x32 href="/favicon-32x32.png?v=m2llJQPQq8"><link rel=icon type=image/png sizes=16x16 href="/favicon-16x16.png?v=m2llJQPQq8"><link rel=manifest href="/manifest.json?v=m2llJQPQq8"><link rel=mask-icon href="/safari-pinned-tab.svg?v=m2llJQPQq8" color=#5bbad5><link rel="shortcut icon" href="/favicon.ico?v=m2llJQPQq8"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=theme-color content=#ffffff><meta property=og:title content="Making Myself Obsolete"><meta property=og:type content=website><meta property=og:description content="In December 2015 I was looking for static analy..."><meta property=og:url content=https://matthias-endler.de/2017/obsolete><meta property=og:image content=https://matthias-endler.de/img/social/2017_obsolete.png><meta name=twitter:title content="Making Myself Obsolete"><meta name=twitter:description content="In December 2015 I was looking for static analy..."><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@matthiasendler><meta name=twitter:creator content=@matthiasendler><meta name=twitter:image content=https://matthias-endler.de/img/social/2017_obsolete.png><title>Making Myself Obsolete | Matthias Endler</title><meta name=author content="Matthias Endler"><meta name=description content="Personal website of Matthias Endler, a Software Engineer interested in low-level programming and backend development. PHP, Python, Go, Rust."><script>if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"){(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);mixpanel.init("b90a3ae15c47924a498cf617c96cee0c");}</script><header><a class=logo href=/><img alt=Home src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3OTAuMDUgNzc4Ljk1Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjQuNzIyIC0yNDYuNzQ2KSI+PHBhdGggc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSU7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonRXZlciBBZnRlciwgTm9ybWFsJzt0ZXh0LWFsaWduOnN0YXJ0IiBkPSJNNTUzLjEzIDg4Ny40djEzOC4zaDExLjM2Vjg4Ny40em0zOS43Ni4wdjUxLjg2bC0uMS0uMTd2MjAuN2wuMS4xdjY1LjdoMTEuMlY4ODcuNHoiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PGNpcmNsZSByPSIyMTkuNjgiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiBjeD0iNDM3Ljg4IiBjeT0iNTYwLjc5IiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjE2LjAzIi8+PGcgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjYTE2MjAwIj48cGF0aCBkPSJNNTA4LjM4IDU5OC44MmwtNjcuMDcgNDAuMTUtNzQuMi0zOS41M3oiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiBmaWxsPSIjMzMxZjAwIiBzdHJva2Utd2lkdGg9IjEuOTciLz48cGF0aCBkPSJNNTExLjI4IDU5OWwtNzAuMiAzNC4wMy03Ni45LTMzLjl6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JSIgZmlsbD0iI2VmYmEwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+PC9nPjxnIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxOTMuMjcgMzM2KSBzY2FsZSguNjU3OTUpIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCI+PGVsbGlwc2Ugcnk9IjI4IiByeD0iMjUuMjUiIGN5PSItMTYzLjE0IiBjeD0iLTYwOC43NSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4yNDg5NyAtLjExMzcgLjEwNyAxLjE3NTE3IDEwOTUuODcgNDY2LjcpIi8+PGVsbGlwc2Ugcnk9IjE3LjA0IiByeD0iMTUuMTUiIGN5PSIzNDcuOTkiIGN4PSIzMzEuMzYiIHRyYW5zZm9ybT0ibWF0cml4KC41MjIxMyAwIDAgLjU0NzQ1IDE1OC43NTcgMTM2LjQzMikiIGZpbGw9IiNmZmYiLz48L2c+PGcgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE5My4yNyAzMzYpIHNjYWxlKC42NTc5NSkiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIj48ZWxsaXBzZSByeT0iMjgiIHJ4PSIyNS4yNSIgY3k9Ii0xNjMuMTQiIGN4PSItNjA4Ljc1IiB0cmFuc2Zvcm09Im1hdHJpeCgxLjI0ODk3IC0uMTEzNyAuMTA3IDEuMTc1MTcgMTIwMy4yIDQ2Ny42NDYpIi8+PGVsbGlwc2Ugcnk9IjE3LjA0IiByeD0iMTUuMTUiIGN5PSIzNDcuOTkiIGN4PSIzMzEuMzYiIHRyYW5zZm9ybT0ibWF0cml4KC41MjIxMyAwIDAgLjU0NzQ1IDI2NS4zNTggMTM2Ljk5MykiIGZpbGw9IiNmZmYiLz48L2c+PHBhdGggc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGQ9Ik00MzMuODcgNDIwLjE0Yy04MS44NS4yNy0xNTYuNDQgMTA0LjQzLTE4MC40OCAyMTYuNDVhMTk5LjYgMTk5LjYuMCAwIDAgNTEuOCA3M2M3LjktMTU3LjkgNDQuOC0yNjcgMTEyLjYtMjA3LjkgMTAuMSA4LjggMTUuMSAxMi45IDIwIDEyLjYgNC45LjMgMTAtMy44IDIwLjEtMTIuNyA2Ny43LTU5LjEgMTA0LjYgNDkuOSAxMTIuNSAyMDcuOGExOTkuNiAxOTkuNi4wIDAgMCA1MS44LTcyLjljLTI0LTExMi05OC42LTIxNi4yLTE4MC41LTIxNi41LTEuNC4wLTIuNy4wLTQgLjEtMS40LS4xLTIuNy0uMS00LS4xeiIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiLz48cGF0aCBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidFdmVyIEFmdGVyLCBOb3JtYWwnO3RleHQtYWxpZ246c3RhcnQiIGQ9Ik0xNTUuOTIgMTAyNS43aDExLjRsLTIwLjktMTM4LjNoLTEyLjI4bC0yMC45IDEzOC4zaDExLjRsNS44Ny00NS44MmgxOS40em0tMjQuMi01NC45OCA4LjQ3LTY0LjMgOC40IDY0LjN6bTgyLjA2LTgzLjMyaC00MS4xNHYxMC43MmgxNC44NnYxMjcuNTdoMTEuNFY4OTguMWgxNC44OHoiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIiBmaWxsPSIjOTU5NTk1Ii8+PHBhdGggc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSU7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonRXZlciBBZnRlciwgTm9ybWFsJzt0ZXh0LWFsaWduOnN0YXJ0IiBkPSJNMjUzLjI4IDg4Ny40aC00MS4xNHYxMC43MkgyMjd2MTI3LjU3aDExLjQyVjg5OC4xaDE0Ljg2em00NC45LjB2NjEuMzdIMjY5LjhWODg3LjRoLTExLjR2MTM4LjNoMTEuNHYtNjYuNGgyOC4zNXY2Ni40aDExLjIzVjg4Ny40ek0zMzYgMTAyNS43aC0xMS40MlY4ODcuNGgxMS40em01Ny42Mi4waDExLjRsLTIwLjktMTM4LjNoLTEyLjI4bC0yMC45MiAxMzguM2gxMS40bDUuOS00NS44MmgxOS4zNXptLTI0LjItNTQuOTggOC40Ny02NC4zIDguNCA2NC4zeiIgZm9udC1mYW1pbHk9IkV2ZXIgQWZ0ZXIiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiIGZpbGw9IiM5NTk1OTUiLz48cGF0aCBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidFdmVyIEFmdGVyLCBOb3JtYWwnO3RleHQtYWxpZ246c3RhcnQiIGQ9Ik01NDEuOSA4OTguMTJWODg3LjRoLTMxLjY0djEzOC4zaDMxLjYzdi0xMC43MmgtMjAuM1Y5NTkuM2gxOC44di0xMC41M2gtMTguOHYtNTAuNjV6bTkxLjI0LTEwLjcySDYxOS4zdjEzOC4zaDEzLjg0cTIyLjMuMCAyOS41Ni0yMi40OCA0LjE1LTEzLjMgNC4xNS00Ni42Ny4wLTMzLjM3LTQuMTUtNDYuNjgtNy4yNi0yMi40Ny0yOS41Ni0yMi40N3ptLTEuMiAxMjcuNThoLTEuMjJWODk4LjEyaDEuMnExNS43NC4wIDIwLjU4IDE4LjUgMy4xIDExLjA2IDMuMSAzOS45My4wIDI4Ljg3LTMuMSAzOS45My00Ljg0IDE4LjUtMjAuNTcgMTguNXptNjAuMjMuMFY4ODcuNGgtMTEuNHYxMzguM2gzMS42MnYtMTAuNzJ6bTYyLjEtMTE2Ljg2Vjg4Ny40aC0zMS42NHYxMzguM2gzMS42M3YtMTAuNzJoLTIwLjIyVjk1OS4zaDE4Ljg0di0xMC41M2gtMTguODR2LTUwLjY1em02MC41IDEyNy41OHEtMTQuMTctMzctMjAuNzQtNzIuMjcgMTQuMTctMTAuMzcgMTQuMTctMzMuODguMC0zMi4xNS0yNy40OC0zMi4xNWgtMTUuMnYxMzguM2gxMS40di02NXEyLjI0LS41MiA2LjktMi4wOCA3LjEgMzMuMzYgMTguMzMgNjcuMDd6bS0zNy44Ni03OC41di00OS4wOGgyLjZxMTAuNi4wIDE0LjcgNS44NyAzLjMgNC42IDMuMyAxNS41LjAgMTUuNy04LjEgMjMuMy01LjIgNC44LTEwLjIgNC44LTEuNC4wLTIuMi0uNXoiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZD0iTTU1OS43IDg4OC44bDM4IDEzNS41NCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEwIi8+PHBhdGggZD0iTTI0LjcyIDg4Ny42OHYxMzhoMTEuNFY5MDguNzRjNi42IDEyLjcgMTMuNzggMjUuODggMTkuNjYgMzYuNzdsNS43IDEwaC4wMmw1LjcyLTEwYzYuNi0xMiAxMy41NC0yNS4yIDE5Ljc4LTM2Ljd2MTE3aDExLjJWODg3LjdIODdjLTcuMyAxMy4zNi0xNC44IDI3LjM1LTIxLjUgMzkuOGwtNCA3LjQzYy05LjEtMTctMTcuMjgtMzItMjUuNC00Ny4yeiIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSU7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonRXZlciBBZnRlciwgTm9ybWFsJzt0ZXh0LWFsaWduOnN0YXJ0IiBmb250LXNpemU9IjE3Mi41MiIgZm9udC1mYW1pbHk9IkV2ZXIgQWZ0ZXIiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiIGZpbGw9IiM5NTk1OTUiLz48cGF0aCBkPSJNNDIzLjQ4IDEwMjQuNzVjLTMuNzItMS4zMy04Ljk3LTUtMTEuNzctOC4yLTEuMy0xLjYyLTIuNS0zLjI2LTIuNS0zLjYgNC4zLTYuMDUgNC40LTYuMzIgNS4zLTcuNDUgMy4zIDMuNCA2LjcgNi44IDEwLjkgOS4wNyA1IDEuODIgMTEuMyAyLjA4IDE1LjMtLjM0IDUuNS0zLjMgOC42LTguODcgOS43LTE3LjM0IDEuNS0xMS44LTIuNi0yMi42LTEzLjItMzQuOWwtOS4zLTEwLjljLTQuOC01LjctMTAtMTMuNC0xMS44LTE4LjUtNC4zLTEyLjUtMy44LTIxLjMtLjYtMzAuMyAyLjEtNS45IDQuOS05LjYgOS4xLTEyLjIgOC4zLTUuMiAxOS4zLTQuMyAyNy40IDIuMi44LjcgMS43IDEuNCAyLjUgMi41LS40LjctMy44IDguNy00LjQgOC43bC0xLjYtMS4zYy0uNy0uNy0yLjctMi4yLTQuNC0zLjItNC41LTIuMi04LjYtMy4xLTEzLS43LTYuMSAzLjQtOS4yIDExLjctNy45IDIxLjQgMS4xIDguMyA0LjUgMTQgMTcuOSAyOS41IDEzLjEgMTUuMiAxNyAyMi4zIDE4LjkgMzQuNiAxIDUuNiAxIDEwIC4xIDE2LjYtMS43IDEyLjMtNy4yIDIwLjUtMTYuMiAyMy45LTMuMzQgMS4zLTE2LjUgMS4zLTIwLjEuMHoiIGZpbGw9IiM5NTk1OTUiLz48cGF0aCBkPSJNMzE0LjI0IDQ2OS4xN2wxLjI4IDUuOWMxLjY1IDcuNTggNTIuNDggMi45NiAxMTMuNTItMTAuMzIgNjEuMDQtMTMuMjcgMTA5LjItMzAuMTggMTA3LjU1LTM3Ljc2bC0xLjMtNS45eiIgZmlsbD0iIzkyMDIwYiIvPjxwYXRoIGQ9Ik01MzUuMyA0MjEuMWMxLjY1IDcuNTctNDYuNSAyNC40Ny0xMDcuNTQgMzcuNzUtNjEuMDUgMTMuMjctMTExLjg3IDE3LjktMTEzLjUyIDEwLjMyLTEuNjUtNy42IDQ2LjUtMjQuNSAxMDcuNTUtMzcuNzcgNjEtMTMuMjcgMTExLjgtMTcuOSAxMTMuNS0xMC4zIiBmaWxsPSIjY2QwNTE1Ii8+PHBhdGggZD0iTTMwMi44OCAyODQuNzhzNDUuMjIgMTA0LjQgNTguOTIgMTY4LjU1YzEgNC42OCAyOS41MyAyLjQ1IDYzLjY3LTQuOTcgMzQuMTUtNy40MyA2MS0xNy4yNCA2MC0yMS45Mi0xNC4yLTY0LjA0LTE2LjQtMTc3LjgtMTYuNC0xNzcuOGwtMTY2LjIgMzYuMTR6IiBmaWxsPSIjY2QwNTE1Ii8+PHBhdGggZD0iTTQ4NS40NiA0MjYuNDRjLTE0LjE4LTY0LjA0LTE2LjQtMTc3LjgtMTYuNC0xNzcuOGwtNDUuMTUgOS44MmM4LjMgNDAgMjAuOCAxMjguMjQtMTEuMiAxOTIuNSA0LjItLjc4IDguNS0xLjY0IDEyLjktMi42IDM0LjItNy40MyA2MS0xNy4yNCA2MC0yMS45MiIgZmlsbD0iI2FiMDMwZiIvPjxwYXRoIGQ9Ik00MTcuNzQgNDEyLjhjLTI4Ljk1IDYuMy01NC4xNyA5LjE3LTY0LjQ4IDcuNzMgMy40MyAxMS41NiA2LjM3IDIyLjY4IDguNTQgMzIuOCAxLjAyIDQuNjggMjkuNTMgMi40NSA2My42Ny00Ljk3IDM0LjE1LTcuNDMgNjEtMTcuMjQgNjAtMjEuOTItMi4yNC0xMC4xLTQuMTgtMjEuNDUtNS44Ny0zMy40LTguNzcgNS42LTMyLjkgMTMuNDctNjEuODYgMTkuNzciIGZpbGw9IiMwMDI0M2IiLz48cGF0aCBkPSJNNDg0LjUgNDIxLjk3bC0uNTctMi44N2MtLjA1LS4zLS4xLS42LS4xNy0uOWwtLjYyLTMuMjctLjEtLjQ4Yy0uNDgtMi42NC0uOTQtNS4zMy0xLjQtOC4wNy0uMDItLjE4LS4wNi0uMzctLjEtLjU1bC0uNTUtMy41MmMtLjEtLjItLjEtLjUtLjItLjdsLS42LTMuN2MwLS4xLS4xLS4zLS4xLS40bC0uNi00LjItLjEtLjFjLTcuOSA1LTI4IDExLjgtNTIuOSAxNy43LTMuMiAxNC03LjggMjcuNi0xNC4xIDQwLjJsNi4zLTEuMmMyLjEtLjQgNC4zLS45IDYuNS0xLjMgMzQuMS03LjQgNjEtMTcuMiA2MC0yMS45bC0uOC0zLjUtLjItLjkiIGZpbGw9IiMwMDFjMzAiLz48cGF0aCBkPSJNNDY5LjA2IDI0OC42NGMxLjAyIDQuNjgtMzUuMzYgMTYuNTctODEuMjQgMjYuNTUtNDUuOSA5LjktODMuOTIgMTQuMi04NC45NCA5LjUtMS00LjcgMzUuMzYtMTYuNiA4MS4yNS0yNi42IDQ1LjktMTAgODMuOS0xNC4zIDg0LjkzLTkuNiIgZmlsbD0iIzkyMDIwYiIvPjxwYXRoIGQ9Ik0zOTkuMDMgNDIwLjFjLTQgLjg2LTYuNTIgNC44LTUuNjYgOC44bDMuMTYgMTQuNTRjLjg3IDQgNC44MiA2LjUzIDguOCA1LjY2bDM4Ljc2LTguNDJjNC0uODcgNi41LTQuODMgNS42LTguODJsLTMuMi0xNC41NGMtLjktMy45OC00LjgtNi41My04LjgtNS42NnptNDcuMzIgMzAuOTctMzguNzUgOC40MmMtOS43MiAyLjEtMTkuMzUtNC4xLTIxLjQ2LTEzLjhsLTMuMTYtMTQuNmMtMi4xMi05LjcgNC4wNy0xOS40IDEzLjgtMjEuNWwzOC43NC04LjVjOS43My0yLjEgMTkuMzYgNCAyMS40NyAxMy44bDMuMSAxNC41YzIuMSA5LjctNC4xIDE5LjMtMTMuOCAyMS40IiBmaWxsPSIjZmY5MjAwIi8+PHBhdGggZD0iTTMxMC44NiAzMDMuOGMyLjc0IDYuNjYgNi4wNCAxNC43OCA5LjYzIDIzLjkgMTkuMy0xLjQ1IDQ2LjQtNS42MiA3Ni4xLTEyLjA4IDI5LjctNi40NiA1Ni4xLTEzLjkyIDc0LjItMjAuNjMtLjUtOS44LS45LTE4LjYtMS4yLTI1LjgtMTguOCA3LjEtNDYuOCAxNS03OC40IDIxLjktMzEuNyA2LjgtNjAuNCAxMS4yLTgwLjUgMTIuNm05NS4zIDU1LjRjMjYuNC01LjggNTAuMS0xMi4zIDY3LjgtMTguNC0uNy04LjctMS40LTE3LjMtMS45LTI1LjUtMTguNSA2LjQtNDMuNSAxMy4zLTcxLjMgMTkuMy0yNy45IDYtNTMuNSAxMC4xLTcyLjkgMTIgMi45IDcuNiA1LjkgMTUuNyA4LjggMjMuOSAxOC42LTEuOSA0My01LjggNjkuMy0xMS41bTkuNSA0My42YzI0LjEtNS4zIDQ2LTExLjIgNjMuMS0xNi44LTEuMS04LjMtMi4xLTE2LjctMi45LTI1LjEtMTcuNyA1LjgtNDAuNSAxMS45LTY1LjUgMTcuNC0yNS4xIDUuNC00OC4zIDkuMy02Ni45IDExLjMgMi43IDguMSA1LjMgMTYuMSA3LjggMjQgMTcuOS0yIDQwLjMtNS43IDY0LjMtMTAuOSIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik00NzguNjYgMzg2LjAzYy0xLjA3LTguMjItMi4wMy0xNi42NS0yLjg4LTI1LjEtMTIuMzMgNC4wNy0yNy4xIDguMjgtNDMuNCAxMi4zLS43IDguODQtMS44IDE3LjcyLTMuMzcgMjYuNSAxOC44LTQuNCAzNS44LTkuMTQgNDkuNy0xMy43bS00LjctNDUuMThjLS43LTguNy0xLjMtMTcuMjctMS44LTI1LjQ2LTExIDMuOC0yNC4zIDcuOC0zOS4yIDExLjcuNSA4LjMuNyAxNi45LjUgMjUuNiAxNS40LTQgMjkuMy04IDQwLjYtMTEuOU00NzEgMjk1Yy0uNS05LjgtLjktMTguNi0xLjE3LTI1LjgtMTEuMDMgNC4xLTI1LjI1IDguNi00MS41IDEzIDEuMTcgNy43IDIuMjcgMTYgMy4xNSAyNSAxNS4zNC00LjEgMjguODYtOC4zIDM5LjUtMTIuMyIgZmlsbD0iI2Q2ZDZkNiIvPjwvZz48L3N2Zz4="></a><p>Backend Engineer at trivago. Likes just-in-time compilers and hot chocolate. <a href=/about>About me.</a><nav><ul><li><a href=/>Home</a><li><a href=/talks>Talks</a><li><a href=/rss.xml>Feed</a></ul></nav></header><main role=main><div class=published-date><i>Published on 10th of December 2017</i></div><h1>Making Myself Obsolete</h1><i>&mdash; Writing a Linter for Linting Linters</i><figure><object data=/img/posts/2017/obsolete/dinosaur.svg type=image/svg+xml></object><figcaption>The Stegosaurus had better days 150 million years ago.<br>Paleontologists once thought he had a <a target=_blank href=https://en.wikipedia.org/wiki/Stegosaurus#.22Second_brain.22>brain in its butt</a>.</figcaption></figure><p>In December 2015 I was looking for static analysis tools to integrate into <a target=_blank href=https://www.trivago.com>trivago</a>'s CI process.
The idea was to detect typical programming mistakes automatically.
That's quite a common thing and there are lots of helpful tools out there which fit the bill.<p>So I looked for a list of tools...<p>To my surprise, <a target=_blank href=https://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis>the only list I found was on Wikipedia</a> — and it was outdated.
There was no such project on Github, where most modern static analysis tools were hosted.<p>Without thinking too much about it, I opened up my editor and wrote down a few tools I found through my initial research. After that, I pushed the list to Github.<p>I called the project <a target=_blank href=https://github.com/mre/awesome-static-analysis/>Awesome Static Analysis</a>.<p>Fast forward two years, and the list has grown quite a bit.
So far, it has 75 contributors, 277 forks and received over 2000 stars. (Thanks for all the support!)<p>Around 1000 unique visitors find the list every week. Not much by any means, but I feel obliged to keep it up-to-date
because it has become an important source of information for many people.<p>It now lists around 300 tools for static analysis. Everything from Ada to TypeScript is on there.
What I find particularly motivating is, that now the authors themselves create pull requests to add their tools!<p>There was one problem though: The list of pull requests got longer and longer, as I was busy doing other things.<p><img src=/img/posts/2017/obsolete/pull_requests.jpg alt="The list of Github Pull requests for awesome-static-analysis"><h3>Adding contributors</h3><p>I always try to make team members out of regular contributors. My friend and colleague <a target=_blank href=https://github.com/andygrunwald>Andy Grunwald</a> as well as <a target=_blank href=https://github.com/impredicative>Ouroboros Chrysopoeia</a> are both valuable collaborators. They help me weed out new PRs whenever they find the time.<p>But let's face it: checking the pull requests is a boring, manual task.
What needs to be checked for each new tool can be summarized like this:<ul><li>Formatting rules are satisfied<li>Project URL is reachable<li>License annotation is correct<li>Tools of each section are alphabetically ordered<li>Description is not too long</ul><p>I guess it's obvious what we should do with that checklist: automate it!<h3>A linter for linting linters</h3><p>So why not write an analysis tool, which checks our list of analysis tools!
What sounds pretty meta, is actually pretty straightforward.<p>With every pull request, we trigger our bot, which checks the above rules and responds with a result.<p>The first step was to read the <a target=_blank href=https://developer.github.com/v3/guides/building-a-ci-server/>Github documentation about building a CI server</a>.<p>Just for fun, I wanted to create the bot in <a target=_blank href=https://www.rust-lang.org/>Rust</a>.
The two most popular Github clients for Rust were <a target=_blank href=https://github.com/mgattozzi/github-rs>github-rs</a> and <a target=_blank href=https://github.com/softprops/hubcaps>hubcaps</a>.
Both looked pretty neat, but then I found <a target=_blank href=https://github.com/softprops/afterparty>afterparty</a>, a &quot;Github webhook server&quot;.<p>The example looked fabulous:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#a7adba>#[macro_use]</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>extern</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>crate</span><span style=background-color:#eff1f5;color:#4f5b66> log</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>extern</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>crate</span><span style=background-color:#eff1f5;color:#4f5b66> env_logger</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>extern</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>crate</span><span style=background-color:#eff1f5;color:#4f5b66> afterparty</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>extern</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>crate</span><span style=background-color:#eff1f5;color:#4f5b66> hyper</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>use</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>afterparty::</span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>Delivery</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> Hub</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>use</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>hyper::</span><span style=background-color:#eff1f5;color:#4f5b66>Server</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#b48ead>pub</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>fn</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>main</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>env_logger::</span><span style=background-color:#eff1f5;color:#4f5b66>init</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>unwrap</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> addr </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>format!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>0.0.0.0:</span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#d08770>4567</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>mut</span><span style=background-color:#eff1f5;color:#4f5b66> hub </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Hub::</span><span style=background-color:#eff1f5;color:#4f5b66>new</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>hub.</span><span style=background-color:#eff1f5;color:#96b5b4>handle</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>pull_request</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#bf616a>delivery</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>Delivery</span><span style=background-color:#eff1f5;color:#4f5b66>|</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#b48ead>match</span><span style=background-color:#eff1f5;color:#4f5b66> delivery.payload </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>            </span><span style=background-color:#eff1f5;color:#4f5b66>Event::</span><span style=background-color:#eff1f5;color:#4f5b66>PullRequest </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>ref</span><span style=background-color:#eff1f5;color:#4f5b66> action</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>ref</span><span style=background-color:#eff1f5;color:#4f5b66> sender</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>..</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>                </span><span style=background-color:#eff1f5;color:#a7adba>//</span><span style=background-color:#eff1f5;color:#a7adba> TODO: My code here!
</span><span style=background-color:#eff1f5;color:#4f5b66>                </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>sender </span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#a3be8c> action </span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> sender.login</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> action</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>            </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>            </span><span style=background-color:#eff1f5;color:#4f5b66>_</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>=&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> srvc </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Server::</span><span style=background-color:#eff1f5;color:#4f5b66>http</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>addr</span><span style=background-color:#eff1f5;color:#4f5b66>[</span><span style=background-color:#eff1f5;color:#4f5b66>..</span><span style=background-color:#eff1f5;color:#4f5b66>]</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>                   </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>unwrap</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>                   </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>handle</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>hub</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>listening on </span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> addr</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>srvc.</span><span style=background-color:#eff1f5;color:#96b5b4>unwrap</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>This allowed me to focus on the actual analysis code,
which makes for a pretty boring read. It mechanically checks for the things mentioned above and could be written in any language.
If you want to have a look (or even contribute!), <a target=_blank href=https://github.com/mre/awesome-static-analysis-ci>check out the repo</a>.<h3>Talking to Github</h3><p>After the analysis code was done, I had a bot, running locally, waiting for incoming pull requests.<p>But how could I talk to Github?<br>I found out, that I should use the <a target=_blank href=https://developer.github.com/v3/repos/statuses/>Status API</a>
and send a <code>POST</code> request to <code>/repos/mre/awesome-static-analysis/statuses/:sha</code><br>(<code>:sha</code> is the commit ID that points to the <code>HEAD</code> of the pull request):<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>{
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;state&quot;: &quot;success&quot;,
</span><span style=background-color:#eff1f5;color:#4f5b66>  </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;description&quot;: &quot;The build succeeded!&quot;
</span><span style=background-color:#eff1f5;color:#4f5b66>}
</span></pre><p>I could have used one of the existing Rust Github clients, but I decided to write a simple function to update the pull request status code.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#b48ead>fn</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#8fa1b3>set_status</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#bf616a>status</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> Status, </span><span style=background-color:#eff1f5;color:#bf616a>desc</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> String, </span><span style=background-color:#eff1f5;color:#bf616a>repo</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#b48ead>str</span><span style=background-color:#eff1f5;color:#4f5b66>, </span><span style=background-color:#eff1f5;color:#bf616a>sha</span><span style=background-color:#eff1f5;color:#4f5b66>:</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#b48ead>str</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>-&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>Result</span><span style=background-color:#eff1f5;color:#4f5b66>&lt;</span><span style=background-color:#eff1f5;color:#4f5b66>reqwest::</span><span style=background-color:#eff1f5;color:#4f5b66>Response</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>{</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> token </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>env::</span><span style=background-color:#eff1f5;color:#4f5b66>var</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>GITHUB_TOKEN</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>?</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> client </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>reqwest::</span><span style=background-color:#eff1f5;color:#4f5b66>Client::</span><span style=background-color:#eff1f5;color:#4f5b66>new</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#b48ead>mut</span><span style=background-color:#eff1f5;color:#4f5b66> params </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>HashMap::</span><span style=background-color:#eff1f5;color:#4f5b66>new</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>params.</span><span style=background-color:#eff1f5;color:#96b5b4>insert</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>state</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>format!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> status</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>params.</span><span style=background-color:#eff1f5;color:#96b5b4>insert</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>description</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> desc</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Sending status: </span><span style=background-color:#eff1f5;color:#d08770>{:#?}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> params</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#b48ead>let</span><span style=background-color:#eff1f5;color:#4f5b66> status_url </span><span style=background-color:#eff1f5;color:#4f5b66>=</span><span style=background-color:#eff1f5;color:#4f5b66> </span><span style=background-color:#eff1f5;color:#4f5b66>format!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>https://api.github.com/repos/</span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#a3be8c>/statuses/</span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> repo</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> sha</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>println!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#a3be8c>Status url: </span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66> status_url</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>;</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>Ok</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>client
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>request</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>            </span><span style=background-color:#eff1f5;color:#4f5b66>reqwest::</span><span style=background-color:#eff1f5;color:#4f5b66>Method::</span><span style=background-color:#eff1f5;color:#4f5b66>Post</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>            </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>format!</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>                </span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#a3be8c>?access_token=</span><span style=background-color:#eff1f5;color:#d08770>{}</span><span style=background-color:#eff1f5;color:#4f5b66>&quot;</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>                </span><span style=background-color:#eff1f5;color:#4f5b66>status_url</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>                </span><span style=background-color:#eff1f5;color:#4f5b66>token</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>            </span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>,</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>json</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>&amp;</span><span style=background-color:#eff1f5;color:#4f5b66>params</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>        </span><span style=background-color:#eff1f5;color:#4f5b66>.</span><span style=background-color:#eff1f5;color:#96b5b4>send</span><span style=background-color:#eff1f5;color:#4f5b66>(</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>?</span><span style=background-color:#eff1f5;color:#4f5b66>)</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>}</span><span style=background-color:#eff1f5;color:#4f5b66>
</span></pre><p>You can see that I pass in a Github token from the environment and then I send the <code>JSON</code> payload as a post request using the <a target=_blank href=https://github.com/seanmonstar/reqwest>reqwest</a> library.<p>That turned out to become a problem in the end: while afterparty was using version 0.9 of <a target=_blank href=https://github.com/hyperium/hyper>hyper</a>, reqwest was using 0.11. Unfortunately, these two versions depend on a different build of the <a target=_blank href=https://crates.io/crates/openssl-sys>openssl-sys</a> bindings. That's a <a target=_blank href=https://github.com/rust-lang/cargo/issues/886>well-known problem</a> and the only way to fix it, is to resolve the conflict.<p>I was stuck for a while, but then I saw, that there was an open pull request to <a target=_blank href=https://github.com/softprops/afterparty/pull/26>upgrade afterparty to hyper 0.10</a>.<p>So inside my <code>Cargo.toml</code>, I locked the version of afterparty to the version of the pull request:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>[dependencies]
</span><span style=background-color:#eff1f5;color:#4f5b66>afterparty = { git = &quot;https://github.com/ms705/afterparty&quot; }
</span></pre><p>This fixed the build and I could finally move on.<h3>Deployment</h3><p>I needed a place to host the bot.<p>Preferably for free, as it was a non-profit Open Source project.
Also, the provider would have to run binaries.<p>For quite some time, I was following a product named <a target=_blank href=https://zeit.co/>zeit</a>.
It runs any Docker container using an intuitive command line interface called <code>now</code>.</p><video controls>
<source src=/img/posts/2017/obsolete/now.mp4 type=video/mp4>Your browser does not support playing mp4 files.</video><p>I fell in love the first time I saw their demo on the site, so I wanted to give it a try.<p>So I added a <a target=_blank href=https://docs.docker.com/engine/userguide/eng-image/multistage-build/>multi-stage Dockerfile</a> to my project:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>FROM rust as builder
</span><span style=background-color:#eff1f5;color:#4f5b66>COPY . /usr/src/app 
</span><span style=background-color:#eff1f5;color:#4f5b66>WORKDIR /usr/src/app 
</span><span style=background-color:#eff1f5;color:#4f5b66>RUN cargo build --release
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66>FROM debian:stretch
</span><span style=background-color:#eff1f5;color:#4f5b66>RUN apt update \
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;&amp; apt install -y libssl1.1 ca-certificates \
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;&amp; apt clean -y \
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;&amp; apt autoclean -y \
</span><span style=background-color:#eff1f5;color:#4f5b66>    </span><span style=background-color:#eff1f5;color:#4f5b66>&amp;&amp; apt autoremove -y
</span><span style=background-color:#eff1f5;color:#4f5b66>COPY --from=builder target/release/check .
</span><span style=background-color:#eff1f5;color:#4f5b66>EXPOSE 4567
</span><span style=background-color:#eff1f5;color:#4f5b66>ENTRYPOINT [&quot;./check&quot;]
</span><span style=background-color:#eff1f5;color:#4f5b66>CMD [&quot;--help&quot;]
</span></pre><p>The first part would build a static binary, the second part would run it at container startup.
Well, that didn't work, because <code>zeit</code> <a target=_blank href=https://github.com/zeit/now-cli/issues/962>does not support multi-stage builds yet</a>.<p>The workaround was to split up the Dockerfile into two and <a target=_blank href=https://github.com/mre/awesome-static-analysis-ci/blob/master/Makefile>connect them both with a Makefile</a>. Makefiles are pretty powerful, <a href=/2017/makefiles/>you know</a>?<p>With that, I had all the parts for deployment together.<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66># Build Rust binary for Linux
</span><span style=background-color:#eff1f5;color:#4f5b66>docker run --rm -v $(CURDIR):/usr/src/ci -w /usr/src/ci rust cargo build --release
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66># Deploy Docker images built from the local Dockerfile
</span><span style=background-color:#eff1f5;color:#4f5b66>now deploy --force --public -e GITHUB_TOKEN=${GITHUB_TOKEN}
</span><span style=background-color:#eff1f5;color:#4f5b66>
</span><span style=background-color:#eff1f5;color:#4f5b66># Set domain name of new build to `check.now.sh`
</span><span style=background-color:#eff1f5;color:#4f5b66># (The deployment URL was copied to the clipboard and is retrieved with pbpaste on macOS)
</span><span style=background-color:#eff1f5;color:#4f5b66>now alias `pbpaste` check.now.sh
</span></pre><p>Here's the output of the deploy using <code>now</code>:<pre style=background-color:#eff1f5>
<span style=background-color:#eff1f5;color:#4f5b66>&gt; Deploying ~/Code/private/awesome-static-analysis-ci/deploy
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Ready! https://deploy-sjbiykfvtx.now.sh (copied to clipboard) [2s]
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Initializing…
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Initializing…
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Building
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; ▲ docker build
</span><span style=background-color:#eff1f5;color:#4f5b66>Sending build context to Docker daemon 2.048 kBkB
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Step 1 : FROM mre0/ci:latest
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; latest: Pulling from mre0/ci
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; ...
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Digest: sha256:5ad07c12184755b84ca1b587e91b97c30f7d547e76628645a2c23dc1d9d3fd4b
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Status: Downloaded newer image for mre0/ci:latest
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt;  ---&gt; 8ee1b20de28b
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Successfully built 8ee1b20de28b
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; ▲ Storing image
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; ▲ Deploying image
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; ▲ Container started
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; listening on 0.0.0.0:4567
</span><span style=background-color:#eff1f5;color:#4f5b66>&gt; Deployment complete!
</span></pre><p>The last step was to add <code>check.now.sh</code> as a webhook inside the awesome-static-analysis <a target=_blank href=https://developer.github.com/webhooks/creating/>project settings</a>.<p>Now, whenever a new pull request is coming in, you see that little bot getting active!<p><img src=/img/posts/2017/obsolete/pull_request_success.jpg alt="A successful pull request, which was checked by the bot"><h3>Outcome and future plans</h3><p>I am very happy with my choice of tools: afterparty saved me from a lot of manual work, while zeit made deployment really easy.<br>It feels like <a target=_blank href=https://aws.amazon.com/lambda/details/>Amazon Lambda</a> on steroids.<p>If you look at the <a target=_blank href=https://github.com/mre/awesome-static-analysis-ci/blob/master/src/main.rs>code</a> and the <a target=_blank href=https://github.com/mre/awesome-static-analysis-ci/commits/master>commits</a> for my little bot, you can see all my little missteps, until I got everything just right. Turns out, parsing human-readable text is tedious.<br>Therefore I was thinking about turning the list of analysis tools into a structured format like <code>YAML</code>. This would greatly simplify the parsing and have the added benefit of having a machine-readable list of tools that can be used for other projects.</main><footer><ul class=links><li class=post-navigation><a href=/2017/digital-clocks><code>&larr; Previous post</code></a>
<a href=/><code>&#8962; Home</code></a>
<a href=/2017/rust-for-rubyists><code>Next post &rarr;</code></a><li>❤️ <a target=_blank href=https://twitter.com/matthiasendler>Follow me on Twitter</a> and never miss a post again.<li>🎁 <a target=_blank href=https://tinyletter.com/mre>Subscribe to new articles.</a></ul></footer><script>if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-693428-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script>